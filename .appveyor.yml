version: "{build}"
clone_folder: c:\projects\bee

environment:
  global:
    VERBOSE: 1 # Get test logs in output
  matrix:
    - MSYSTEM: MSYS
    - MSYSTEM: MINGW64
      # Define _POSIX to get a full set of POSIX signal names from signal.h on mingw
      CPPFLAGS: -D_POSIX
    - MSYSTEM: MINGW32
      # Define _POSIX to get a full set of POSIX signal names from signal.h on mingw
      CPPFLAGS: -D_POSIX

init:
  - git config --global core.autocrlf input

install:
  - git submodule update --init --recursive

build_script:
  - C:\msys64\usr\bin\bash.exe -lc "cd c:/projects/bee && ./bootstrap && ./configure --enable-silent-rules %CONFIGURE_FLAGS% && make && make check"
